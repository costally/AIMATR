<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marathon AI Coach v3.7.1</title>
    <style>
        :root {
            --primary: #007AFF;
            --primary-dark: #0056b3;
            --secondary: #5856D6;
            --success: #34C759;
            --warning: #FF9500;
            --danger: #FF3B30;
            --info: #64D2FF; 
            --steady: #AF52DE;
            --fartlek: #FF2D55; 
            --cross: #FF9F0A; 
            --bg: #F2F2F7;
            --card: #FFFFFF;
            --text-main: #111111;
            --text-sub: #666666;
            --info-bg: #EEF1F5;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: var(--bg);
            color: var(--text-main);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }

        .container {
            width: 100%;
            max-width: 800px;
            background-color: var(--card);
            border-radius: 24px;
            box-shadow: 0 12px 40px rgba(0,0,0,0.12);
            padding: 30px;
            box-sizing: border-box;
            position: relative;
            overflow: hidden;
            min-height: 1100px; 
        }

        .fade-in { animation: fadeIn 0.4s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .hidden { display: none !important; }

        header { text-align: center; margin-bottom: 30px; }
        .badge { background-color: #E5E5EA; color: #555; padding: 5px 10px; border-radius: 8px; font-size: 0.8rem; font-weight: 700; letter-spacing: 0.5px; }
        h1 { margin: 12px 0 6px 0; font-size: 2rem; letter-spacing: -0.5px; color: #000; }
        .subtitle { font-size: 1rem; color: var(--text-sub); margin: 0; }

        /* Form Styles */
        .form-section { margin-bottom: 30px; border-bottom: 2px solid #f2f2f7; padding-bottom: 25px; }
        .form-section:last-of-type { border-bottom: none; }
        .section-title { font-size: 1rem; font-weight: 800; color: var(--primary); margin-bottom: 12px; text-transform: uppercase; letter-spacing: 0.5px; }
        .row { display: flex; gap: 15px; }
        .col { flex: 1; }
        label { display: block; margin-bottom: 8px; font-weight: 700; font-size: 0.95rem; color: #333; }
        select, input[type="date"] {
            width: 100%; padding: 14px; border: 2px solid #e0e0e0; border-radius: 12px; font-size: 1.05rem; font-weight: 500;
            background: #fff; box-sizing: border-box; -webkit-appearance: none; transition: 0.2s; color: #000;
        }
        select:focus, input:focus { outline: none; border-color: var(--primary); background-color: #F8FBFF; }

        .time-picker-group { display: flex; gap: 8px; align-items: center; }
        .time-select-wrapper { flex: 1; position: relative; }
        .time-select-wrapper select { text-align: center; padding-right: 25px; font-weight: 600; }
        .time-label { position: absolute; right: 10px; top: 50%; transform: translateY(-50%); font-size: 0.85rem; color: #888; pointer-events: none; font-weight: 600; }

        .preset-group { display: flex; gap: 10px; margin-bottom: 20px; }
        .preset-btn {
            flex: 1; padding: 14px 5px; border: 2px solid #e0e0e0; background: white; border-radius: 12px;
            font-size: 0.9rem; font-weight: 700; color: #555; cursor: pointer; transition: 0.2s; line-height: 1.3; position: relative;
        }
        .preset-btn.active { background: var(--primary); color: white; border-color: var(--primary); box-shadow: 0 4px 10px rgba(0,122,255,0.2); }
        .preset-btn:hover:not(.active) { background: #f2f2f7; border-color: #ccc; }
        .rec-badge {
            position: absolute; top: -12px; right: -8px; background: #FF3B30; color: white;
            font-size: 0.7rem; padding: 4px 8px; border-radius: 20px; display: none; font-weight: 800;
            box-shadow: 0 3px 6px rgba(0,0,0,0.15); border: 2px solid #fff;
            animation: bounceIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); z-index: 10;
        }
        @keyframes bounceIn { 0% { transform: scale(0); opacity: 0; } 60% { transform: scale(1.1); opacity: 1; } 100% { transform: scale(1); } }

        .feedback-box {
            background: #f2f2f7; padding: 18px; border-radius: 14px; margin-top: 15px;
            font-size: 0.95rem; display: flex; flex-direction: column; gap: 6px; border-left: 5px solid #ccc; transition: all 0.3s;
        }
        .feedback-box.safe { background: #e8fbf0; border-left-color: var(--success); color: #0c5122; }
        .feedback-box.challenge { background: #fff8e6; border-left-color: var(--warning); color: #7a4f01; }
        .feedback-box.danger { background: #feebeb; border-left-color: var(--danger); color: #c90a00; }
        .rec-time-display { font-size: 1.2rem; font-weight: 800; color: var(--primary-dark); margin-top: 5px; }

        .science-info {
            background-color: var(--info-bg); padding: 20px; border-radius: 14px; margin-top: 30px;
            font-size: 0.9rem; color: #444; line-height: 1.6; border: 1px solid #D1D5DB;
        }
        .science-info strong { color: #1c1c1e; font-weight: 800; display: block; margin-bottom: 8px; font-size: 0.95rem; }
        .science-info ul { margin: 5px 0 0 0; padding-left: 20px; }
        .science-info li { margin-bottom: 5px; }
        .fact-icon { margin-right: 6px; }

        button.cta {
            width: 100%; background-color: var(--primary); color: white; padding: 18px; border: none; border-radius: 16px;
            font-size: 1.15rem; font-weight: 700; cursor: pointer; transition: all 0.2s; box-shadow: 0 6px 15px rgba(0,122,255,0.3);
            margin-top: 10px;
        }
        button.cta:hover { background-color: var(--primary-dark); transform: translateY(-2px); }
        button.secondary-btn {
            width: 100%; background-color: transparent; color: #8e8e93; padding: 14px; border: none; font-weight: 700; font-size: 1rem;
            cursor: pointer; margin-top: 15px; transition: color 0.2s;
        }
        button.secondary-btn:hover { color: #333; }

        /* --- View 2 Styles --- */
        .summary-card { background: #F2F2F7; padding: 30px; border-radius: 20px; text-align: center; margin-bottom: 30px; }
        .big-stat { font-size: 2.8rem; font-weight: 800; color: var(--primary); display: block; margin-bottom: 8px; letter-spacing: -1px; }
        .sub-stat { font-size: 1.1rem; color: #555; font-weight: 600; }
        .summary-info-row { display: flex; justify-content: center; gap: 20px; margin-top: 20px; color: #444; font-size: 0.95rem; font-weight: 500; }
        
        .pace-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 12px; margin-bottom: 35px; }
        .pace-card { background: white; padding: 15px; border-radius: 14px; border: 2px solid #e5e5ea; position: relative; text-align: center; }
        .pace-label { font-size: 0.8rem; color: #777; font-weight: 700; margin-bottom: 6px; display: flex; align-items: center; justify-content: center; gap: 6px; }
        .pace-value { font-size: 1.1rem; font-weight: 800; color: #1c1c1e; }
        .dot { width: 8px; height: 8px; border-radius: 50%; }

        .guide-list { margin-top: 30px; margin-bottom: 30px; }
        .guide-item { margin-bottom: 12px; background: white; border: 2px solid #E5E5EA; border-radius: 14px; padding: 15px; display: flex; flex-direction: column; }
        .guide-header { display: flex; align-items: center; gap: 10px; margin-bottom: 6px; }
        .guide-title { font-weight: 800; font-size: 1.05rem; color: #222; }
        .guide-desc { font-size: 0.9rem; color: #555; line-height: 1.5; }
        .guide-tag { font-size: 0.75rem; padding: 3px 8px; border-radius: 6px; background: #F2F2F7; color: #555; font-weight: 700; margin-left: auto; }

        /* --- View 3 & 4 Styles --- */
        .timeline-container { position: relative; padding-left: 20px; border-left: 3px solid #e5e5ea; margin-left: 10px; }
        .phase-card { margin-bottom: 25px; padding: 25px; border-radius: 18px; color: white; position: relative; box-shadow: 0 6px 20px rgba(0,0,0,0.15); }
        .phase-base { background: linear-gradient(135deg, #34C759, #248A3D); }
        .phase-build { background: linear-gradient(135deg, #FF9500, #CC7700); }
        .phase-peak { background: linear-gradient(135deg, #FF3B30, #C41C00); }
        .phase-taper { background: linear-gradient(135deg, #007AFF, #0055B3); }
        .phase-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .phase-name { font-size: 1.2rem; font-weight: 800; }
        .phase-weeks { background: rgba(255,255,255,0.25); padding: 4px 10px; border-radius: 8px; font-size: 0.85rem; font-weight: 700; }
        .phase-desc { font-size: 0.95rem; opacity: 0.95; line-height: 1.5; }

        .week-nav { display: flex; justify-content: space-between; align-items: center; background: #fff; border: 2px solid #E5E5EA; border-radius: 18px; padding: 15px 20px; margin-bottom: 25px; box-shadow: 0 4px 15px rgba(0,0,0,0.03); }
        .nav-btn { background: white; border: 2px solid #E5E5EA; width: 44px; height: 44px; border-radius: 12px; display: flex; justify-content: center; align-items: center; cursor: pointer; font-size: 1.2rem; color: #555; transition: 0.2s; }
        .nav-btn:hover { background: var(--primary); border-color: var(--primary); color: white; }
        .nav-btn:disabled { opacity: 0.3; cursor: not-allowed; }
        .week-info { text-align: center; }
        .week-title { font-size: 1.4rem; font-weight: 900; display: block; margin-bottom: 4px; color: #222; }
        .week-phase { font-size: 0.9rem; color: #666; font-weight: 700; background: #F2F2F7; padding: 4px 12px; border-radius: 20px; }

        .daily-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 15px; margin-bottom: 30px; }
        .day-card { background: white; border: 2px solid #E5E5EA; border-radius: 18px; padding: 15px; position: relative; transition: all 0.2s; cursor: pointer; overflow: hidden; box-shadow: 0 4px 10px rgba(0,0,0,0.03); }
        .day-card.type-Rest { border-top: 6px solid #8e8e93; }
        .day-card.type-Easy { border-top: 6px solid var(--success); }
        .day-card.type-Speed { border-top: 6px solid var(--danger); }
        .day-card.type-Tempo { border-top: 6px solid var(--warning); }
        .day-card.type-Fartlek { border-top: 6px solid var(--fartlek); }
        .day-card.type-Long { border-top: 6px solid #333; }
        .day-card.type-Medium { border-top: 6px solid var(--steady); }
        .day-card.type-Recovery { border-top: 6px solid var(--info); }
        .day-card.type-Wed { border-top: 6px solid var(--cross); }

        .day-card:hover { transform: translateY(-4px); box-shadow: 0 8px 20px rgba(0,0,0,0.08); border-color: #ccc; }
        .day-card.active { border: 3px solid var(--primary); background-color: #F4F9FF; transform: translateY(-4px); box-shadow: 0 8px 25px rgba(0,122,255,0.2); z-index: 10; }
        .day-card.today { background-color: #fff; }
        
        .day-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
        .day-date { font-size: 0.9rem; color: #666; font-weight: 700; }
        .day-badge { font-size: 0.65rem; font-weight: 800; padding: 3px 8px; border-radius: 6px; background: #eee; color: #555; text-transform: uppercase; }
        .today .day-badge { background: #1c1c1e; color: #fff; }

        .day-icon { font-size: 2.2rem; display: block; margin-bottom: 10px; text-align: center; }
        .day-title { font-size: 1.1rem; font-weight: 800; color: #222; margin-bottom: 6px; text-align: center; letter-spacing: -0.5px; }
        .day-desc { font-size: 0.85rem; color: #555; text-align: center; line-height: 1.4; height: 36px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; font-weight: 500; }

        .detail-box { background: white; border: 2px solid #E5E5EA; border-radius: 20px; padding: 30px; box-shadow: 0 10px 40px rgba(0,0,0,0.08); animation: slideUp 0.3s ease-out; }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .detail-header { display: flex; align-items: center; gap: 15px; margin-bottom: 25px; border-bottom: 1px solid #eee; padding-bottom: 15px; }
        .detail-icon-box { width: 60px; height: 60px; background: #F2F2F7; border-radius: 16px; display: flex; justify-content: center; align-items: center; font-size: 2rem; }
        .detail-title-group h3 { margin: 0 0 5px 0; font-size: 1.6rem; color: #111; }
        .detail-title-group span { font-size: 1rem; color: #666; font-weight: 500; }
        .detail-content { display: flex; flex-direction: column; gap: 15px; margin-bottom: 25px; }
        .info-block { background: #F9F9F9; padding: 20px; border-radius: 14px; border-left: 5px solid var(--primary); }
        .info-label { font-size: 0.95rem; font-weight: 900; color: var(--primary-dark); margin-bottom: 10px; display: block; text-transform: uppercase; letter-spacing: 0.5px; }
        .info-text { font-size: 1rem; color: #333; line-height: 1.7; }
        .info-text ul { margin: 5px 0 0 0; padding-left: 20px; }
        .info-text li { margin-bottom: 6px; }
        .caution-box { background: #FFF0F0; border-left: 5px solid var(--danger); padding: 20px; border-radius: 14px; }
        .caution-label { color: var(--danger); font-weight: 900; font-size: 0.9rem; margin-bottom: 5px; display: block; }
        #dCaution { font-weight: 600; color: #555; }

    </style>
</head>
<body>

    <div class="container">
        <!-- HEADER -->
        <header>
            <span class="badge">AI COACH v3.7.1</span>
            <h1>Marathon Planner</h1>
            <p class="subtitle" id="pageSubtitle">ë‚˜ë§Œì˜ ë§ì¶¤í˜• í›ˆë ¨ í”„ë¡œê·¸ë¨ ì„¤ì •</p>
        </header>

        <!-- [VIEW 1] ì…ë ¥ í™”ë©´ -->
        <div id="view-home" class="fade-in">
            <form id="runnerForm">
                <div class="form-section">
                    <div class="section-title">1. Current Fitness (í˜„ì¬ ê¸°ëŸ‰)</div>
                    <div class="row">
                        <div class="col" style="flex: 0.8;"><label>ìµœê·¼ ë‹¬ë¦° ê±°ë¦¬</label><select id="currentDist" onchange="updateAll()"><option value="5">5km</option><option value="10" selected>10km</option><option value="21.0975">í•˜í”„</option><option value="42.195">í’€ì½”ìŠ¤</option></select></div>
                        <div class="col" style="flex: 1.2;"><label>ìµœê·¼ ê¸°ë¡</label><div class="time-picker-group"><div class="time-select-wrapper"><select id="curH" onchange="updateAll()"></select><span class="time-label">h</span></div><div class="time-select-wrapper"><select id="curM" onchange="updateAll()"></select><span class="time-label">m</span></div><div class="time-select-wrapper"><select id="curS" onchange="updateAll()"></select><span class="time-label">s</span></div></div></div>
                    </div>
                </div>
                <div class="form-section">
                    <div class="section-title">2. Target Goal (ëª©í‘œ ì„¤ì •)</div>
                    <div class="row" style="margin-bottom:15px;">
                        <div class="col" style="flex:0.8;"><label>ëª©í‘œ ëŒ€íšŒ</label><select id="targetDist" onchange="updateAll()"><option value="5">5K</option><option value="10">10K</option><option value="21.0975">í•˜í”„</option><option value="42.195" selected>í’€ì½”ìŠ¤</option></select></div>
                        <div class="col" style="flex:1.2;"><label>ëª©í‘œ ê¸°ë¡ ì„¤ì •</label><div class="time-picker-group"><div class="time-select-wrapper"><select id="tarH" onchange="updateAll()"></select><span class="time-label">h</span></div><div class="time-select-wrapper"><select id="tarM" onchange="updateAll()"></select><span class="time-label">m</span></div><div class="time-select-wrapper"><select id="tarS" onchange="updateAll()"></select><span class="time-label">s</span></div></div></div>
                    </div>
                    <label style="margin-top:25px;">í›ˆë ¨ ê¸°ê°„ ì„ íƒ</label>
                    <div class="preset-group"><button type="button" class="preset-btn" id="btn8" onclick="selectPreset(8, this)">8ì£¼</button><button type="button" class="preset-btn active" id="btn12" onclick="selectPreset(12, this)">12ì£¼</button><button type="button" class="preset-btn" id="btn16" onclick="selectPreset(16, this)">16ì£¼</button><button type="button" class="preset-btn" id="btnAuto" onclick="selectPreset('auto', this)">ëŒ€íšŒì¼ê¹Œì§€</button></div>
                    <div class="row" style="margin-bottom: 25px;"><div class="col"><label>ëŒ€íšŒ ë‚ ì§œ</label><input type="date" id="raceDate" onchange="enableCustomMode()"></div></div>
                    
                    <div id="goalFeedback" class="feedback-box"><span>ğŸ¯ ê¸°ë¡ì„ ì…ë ¥í•˜ë©´ AIê°€ ë¶„ì„í•´ë“œë¦½ë‹ˆë‹¤.</span></div>
                    
                    <div class="science-info">
                        <strong><span class="fact-icon">ğŸ“š</span> ê³¼í•™ì  ê·¼ê±° (Scientific Basis)</strong>
                        <ul>
                            <li><strong>ì˜ˆì¸¡ ì•Œê³ ë¦¬ì¦˜:</strong> Runner's World í‘œì¤€ì¸ Peter Riegel ê³µì‹ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.</li>
                            <li><strong>VDOT:</strong> Jack Danielsì˜ VDOT ì´ë¡ ì„ ê¸°ë°˜ìœ¼ë¡œ, í˜„ì¬ ìˆ˜í–‰ ëŠ¥ë ¥ì— ê°€ì¥ ì í•©í•œ í›ˆë ¨ ê°•ë„ë¥¼ ì‚°ì¶œí•©ë‹ˆë‹¤.</li>
                        </ul>
                    </div>
                </div>
                <div class="form-section"><div class="section-title">3. Schedule (í›ˆë ¨ ë¹ˆë„)</div><select id="freq" onchange="updateAll()"><option value="3">ì£¼ 3íšŒ (ìœ ì§€/ê±´ê°•)</option><option value="4" selected>ì£¼ 4íšŒ (ê¸°ë¡í–¥ìƒ ê¶Œì¥)</option><option value="5">ì£¼ 5íšŒ (ì—˜ë¦¬íŠ¸/Sub-3)</option></select></div>
                <button type="button" class="cta" onclick="generateAndGoToSummary()">í”„ë¡œê·¸ë¨ ìƒì„±í•˜ê¸°</button>
            </form>
        </div>

        <!-- [VIEW 2] ìš”ì•½ í™”ë©´ -->
        <div id="view-summary" class="hidden">
            <div class="summary-card">
                <span class="sub-stat" id="sumTitle">ëª©í‘œ ì„¤ì • ê¸°ë¡</span>
                <span class="big-stat" id="sumTargetTime">00:00:00</span>
                <div class="summary-info-row"><span><span class="badge" style="background:var(--primary); color:white;">VDOT <span id="sumVdot">00</span></span></span><span>í›ˆë ¨ê¸°ê°„: <b style="color:#222" id="sumWeeks">00ì£¼</b></span><span>ëŒ€íšŒê¹Œì§€: <b style="color:#222" id="sumDday">D-00</b></span></div>
            </div>
            <h4 class="section-title">ğŸƒ Training Paces & Types</h4>
            <div class="pace-grid">
                <div class="pace-card"><div class="pace-label"><div class="dot" style="background:#64D2FF"></div>Recovery</div><div class="pace-value" id="paceRecovery">-</div></div>
                <div class="pace-card"><div class="pace-label"><div class="dot" style="background:var(--success)"></div>Easy / LSD</div><div class="pace-value" id="paceEasy">-</div></div>
                <div class="pace-card"><div class="pace-label"><div class="dot" style="background:#AF52DE"></div>Steady</div><div class="pace-value" id="paceSteady">-</div></div>
                <div class="pace-card"><div class="pace-label"><div class="dot" style="background:var(--fartlek)"></div>Fartlek</div><div class="pace-value">ììœ  ë³€ì†</div></div>
                <div class="pace-card"><div class="pace-label"><div class="dot" style="background:var(--warning)"></div>Threshold</div><div class="pace-value" id="paceThreshold">-</div></div>
                <div class="pace-card"><div class="pace-label"><div class="dot" style="background:var(--danger)"></div>Interval</div><div class="pace-value" id="paceInterval">-</div></div>
                <div class="pace-card" style="grid-column: span 2;"><div class="pace-label"><div class="dot" style="background:var(--primary)"></div>Marathon Pace (Target)</div><div class="pace-value" id="paceMarathon" style="color:var(--primary)">-</div></div>
            </div>
            <h4 class="section-title">ğŸ“š Training Glossary (í›ˆë ¨ ìš©ì–´ì§‘)</h4>
            <div class="guide-list">
                <div class="guide-item"><div class="guide-header"><span style="font-size:1.2rem;">ğŸ’¨</span><span class="guide-title">Fartlek (íŒŒí‹€ë ‰)</span><span class="guide-tag">Zone 3-5</span></div><div class="guide-desc">"ìŠ¤í”¼ë“œ í”Œë ˆì´"ë¼ëŠ” ëœ»ì…ë‹ˆë‹¤. ì •í•´ì§„ í˜•ì‹ ì—†ì´ ì§€í˜•ì§€ë¬¼ì´ë‚˜ ê¸°ë¶„ì— ë”°ë¼ ë¹ ë¥´ê²Œ ë‹¬ë ¸ë‹¤ê°€ ì²œì²œíˆ ë‹¬ë¦¬ê¸°ë¥¼ ë°˜ë³µí•©ë‹ˆë‹¤.</div></div>
                <div class="guide-item"><div class="guide-header"><span style="font-size:1.2rem;">ğŸ”¥</span><span class="guide-title">Threshold (ì—­ì¹˜ì£¼)</span><span class="guide-tag">Zone 4</span></div><div class="guide-desc">"í¸ì•ˆí•˜ê²Œ í˜ë“¤ë‹¤"ëŠ” ê°•ë„ì…ë‹ˆë‹¤. ì –ì‚°ì´ ìŒ“ì´ëŠ” ì‹œì ì„ ëŠ¦ì¶°ì£¼ì–´ ìŠ¤í”¼ë“œ ì§€êµ¬ë ¥ì„ ê¸°ë¦…ë‹ˆë‹¤.</div></div>
                <div class="guide-item"><div class="guide-header"><span style="font-size:1.2rem;">âš¡</span><span class="guide-title">Interval (ì¸í„°ë²Œ)</span><span class="guide-tag">Zone 5</span></div><div class="guide-desc">ìµœëŒ€ ì‹¬ë°•ìˆ˜ì— ë„ë‹¬í•˜ëŠ” ì§ˆì£¼ì™€ ë¶ˆì™„ì „ íœ´ì‹ì„ ë°˜ë³µí•©ë‹ˆë‹¤. ì—”ì§„(ì‹¬íê¸°ëŠ¥)ì˜ í¬ê¸°ë¥¼ í‚¤ìš°ëŠ” ê°€ì¥ ê°•ë ¥í•œ í›ˆë ¨ì…ë‹ˆë‹¤.</div></div>
            </div>
            <div class="science-info">
                <strong><span class="fact-icon">ğŸ’¡</span> ì™œ ë‹¤ì–‘í•œ í›ˆë ¨ì„ í•˜ë‚˜ìš”? (Training Mix)</strong>
                <ul>
                    <li>ê°™ì€ ì†ë„ë¡œë§Œ ë‹¬ë¦¬ë©´ ëª¸ì´ ì ì‘í•´ë²„ë¦½ë‹ˆë‹¤(Plateau).</li>
                    <li><strong>íŒŒí‹€ë ‰</strong>ì€ ì‹ ê²½ê³„ë¥¼ ê¹¨ìš°ê³ , <strong>ì—­ì¹˜ì£¼</strong>ëŠ” ë²„í‹°ëŠ” í˜ì„, <strong>ì¸í„°ë²Œ</strong>ì€ ìµœëŒ€ ì¶œë ¥ì„ ë†’ì—¬ì¤ë‹ˆë‹¤.</li>
                </ul>
            </div>
            <button type="button" class="cta" onclick="goToDetail()">ìƒì„¸ í›ˆë ¨ ë¡œë“œë§µ ë³´ê¸°</button>
            <button type="button" class="secondary-btn" onclick="goToHome()">ì¡°ê±´ ë‹¤ì‹œ ì„¤ì •í•˜ê¸°</button>
        </div>

        <!-- [VIEW 3] Roadmap í™”ë©´ -->
        <div id="view-detail" class="hidden">
            <div style="margin-bottom:25px;"><h3 style="margin:0;">ğŸ“… ì£¼ì°¨ë³„ í›ˆë ¨ ë¡œë“œë§µ</h3><p style="color:#666; font-size:0.95rem;">ì´ <span id="detailTotalWeeks">0</span>ì£¼ / <span id="detailTarget"></span> ëª©í‘œ</p></div>
            <div class="timeline-container" id="timelineArea"></div>
            <div class="science-info" style="margin-top:20px;">
                <strong><span class="fact-icon">ğŸ“ˆ</span> ì£¼ê¸°í™” ì´ë¡  (Periodization)</strong>
                <ul>
                    <li><strong>Base:</strong> ê¸°ì´ˆ ì²´ë ¥ì„ ë‹¤ì§€ëŠ” ì‹œê¸° (ë¶€ìƒ ë°©ì§€)</li>
                    <li><strong>Build:</strong> í›ˆë ¨ëŸ‰ê³¼ ê°•ë„ë¥¼ ì ì§„ì ìœ¼ë¡œ ë†’ì´ëŠ” ì‹œê¸°</li>
                    <li><strong>Peak:</strong> ìµœê³ ì˜ í¼í¬ë¨¼ìŠ¤ë¥¼ ìœ„í•´ ê°•ë„ë¥¼ ìµœëŒ€ë¡œ ë†’ì´ëŠ” ì‹œê¸°</li>
                    <li><strong>Taper:</strong> í›ˆë ¨ëŸ‰ì„ ì¤„ì—¬ í”¼ë¡œë¥¼ íšŒë³µí•˜ê³  ëŒ€íšŒ ì—ë„ˆì§€ë¥¼ ëª¨ìœ¼ëŠ” ì‹œê¸°</li>
                </ul>
            </div>
            <button type="button" class="cta" style="margin-top:20px;" onclick="goToSchedule()">ğŸ“† ì¼ìë³„ ìƒì„¸ ìŠ¤ì¼€ì¤„ ë³´ê¸°</button>
            <button type="button" class="secondary-btn" onclick="goToSummary()">â† ìš”ì•½ í™”ë©´ìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
        </div>

        <!-- [VIEW 4] Daily Schedule í™”ë©´ -->
        <div id="view-schedule" class="hidden">
            <h3 style="margin:0 0 15px 0;">ğŸ—“ï¸ ì£¼ê°„ í›ˆë ¨ ìŠ¤ì¼€ì¤„</h3>
            <div class="week-nav">
                <button class="nav-btn" onclick="changeWeek(-1)">â®</button>
                <div class="week-info"><span class="week-title" id="displayWeek">Week 1</span><span class="week-phase" id="displayPhase">Base Phase</span></div>
                <button class="nav-btn" onclick="changeWeek(1)">â¯</button>
            </div>
            <div class="daily-grid" id="dailyGrid"></div>
            
            <div id="detailBox" class="detail-box" style="display:none;">
                <div class="detail-header"><div class="detail-icon-box" id="dIcon"></div><div class="detail-title-group"><h3 id="dTitle"></h3><span id="dSubtitle"></span></div></div>
                <div class="detail-content">
                    <div class="info-block"><span class="info-label">ğŸ¯ WHY (ì˜¤ëŠ˜ì˜ ëª©í‘œ)</span><div class="info-text" id="dWhy"></div></div>
                    <div class="info-block"><span class="info-label">âš™ï¸ HOW (ìƒì„¸ í›ˆë ¨ ë£¨í‹´)</span><div class="info-text" id="dHow"></div></div>
                </div>
                <div class="caution-box"><span class="caution-label">âš ï¸ CAUTION (ì£¼ì˜ì‚¬í•­)</span><span id="dCaution"></span></div>
            </div>

            <div class="science-info">
                <strong><span class="fact-icon">âš–ï¸</span> ê°•ì•½ ì¡°ì ˆì˜ ì›ì¹™ (Hard/Easy)</strong>
                <ul>
                    <li>ê³ ê°•ë„ í›ˆë ¨(í¬ì¸íŠ¸ í›ˆë ¨) ë‹¤ìŒ ë‚ ì€ ë°˜ë“œì‹œ ì‰¬ê±°ë‚˜ ì•„ì£¼ ê°€ë³ê²Œ ë›°ì–´ì•¼ í•©ë‹ˆë‹¤.</li>
                    <li><strong>ì´ˆê³¼íšŒë³µ:</strong> ìš´ë™ í›„ íœ´ì‹í•  ë•Œ ê·¼ìœ¡ì´ ë” ê°•í•˜ê²Œ ì„±ì¥í•©ë‹ˆë‹¤. íœ´ì‹ë„ í›ˆë ¨ì…ë‹ˆë‹¤.</li>
                </ul>
            </div>
            <button type="button" class="secondary-btn" style="margin-top:30px;" onclick="goToDetail()">â† ë¡œë“œë§µìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
        </div>
    </div>

    <script>
        let currentTrainingWeeks = 12; let userPaces = {}; let userFreq = 4; let globalTargetDist = 42.195; let currentViewWeek = 1;

        window.onload = function() { initTimeSelects(); selectPreset(12, document.getElementById('btn12')); updateAll(); }

        function initTimeSelects() {
            const createOpts = (el, max) => { for(let i=0; i<=max; i++) el.add(new Option(i, i)); };
            createOpts(document.getElementById('curH'), 9); createOpts(document.getElementById('curM'), 59); createOpts(document.getElementById('curS'), 59); document.getElementById('curM').value = 37;
            createOpts(document.getElementById('tarH'), 9); createOpts(document.getElementById('tarM'), 59); createOpts(document.getElementById('tarS'), 59);
        }
        function updateAll() { const i=getInputs(); if(i){ const r=calculateRecommendation(i); updateRecommendationBadge(r); updateFeedbackBox(i); } }
        
        function getInputs() {
            const curDist=parseFloat(document.getElementById('currentDist').value), curH=parseInt(document.getElementById('curH').value)||0, curM=parseInt(document.getElementById('curM').value)||0, curS=parseInt(document.getElementById('curS').value)||0;
            const curSec=(curH*3600)+(curM*60)+curS; if(curSec===0)return null;
            const targetDist=parseFloat(document.getElementById('targetDist').value), tarH=parseInt(document.getElementById('tarH').value)||0, tarM=parseInt(document.getElementById('tarM').value)||0, tarS=parseInt(document.getElementById('tarS').value)||0;
            const targetSec=(tarH*3600)+(tarM*60)+tarS; 
            const freq=parseInt(document.getElementById('freq').value)||4;
            return {curDist,curSec,targetDist,targetSec,freq};
        }

        function calculateRecommendation(d){
            const eq=d.curSec*Math.pow((d.targetDist/d.curDist),1.06); let fM=(d.freq===3)?0.8:(d.freq===5?1.2:1.0); const p=(w)=>eq*(1-(w*0.0025*fM));
            if(d.targetSec===0) return 12;
            if(p(8)<=d.targetSec*1.01)return 8; if(p(12)<=d.targetSec*1.01)return 12; return 16;
        }
        
        // [FIXED] Added safety check for badge element
        function updateRecommendationBadge(w){
            document.querySelectorAll('.rec-badge').forEach(b => { if(b && b.style) b.style.display='none'; });
            let btnId = w===8?"btn8":(w===12?"btn12":"btn16");
            const btn=document.getElementById(btnId); 
            if(btn){
                const badge = btn.querySelector('.rec-badge');
                if(badge) {
                    badge.style.display='inline-block';
                    badge.innerText="AI ì¶”ì²œ";
                }
            }
        }
        function updateFeedbackBox(d){
            const eqSec=d.curSec*Math.pow((d.targetDist/d.curDist),1.06); let fM=(d.freq===3)?0.8:(d.freq===5?1.2:1.0); const pSec=eqSec*(1-(currentTrainingWeeks*0.0025*fM));
            const ph=Math.floor(pSec/3600), pm=Math.floor((pSec%3600)/60), ps=Math.floor(pSec%60); const str=(ph>0?`${ph}ì‹œê°„ `:"")+`${pm}ë¶„ ${ps}ì´ˆ`;
            const box=document.getElementById('goalFeedback');
            if(d.targetSec===0){box.className="feedback-box";box.innerHTML=`<span>ğŸ¤– ëª©í‘œë¥¼ ì„¤ì •í•˜ì§€ ì•Šìœ¼ì…¨ë„¤ìš”.<br>í˜„ì¬ ê¸°ëŸ‰ ê¸°ì¤€ <strong>${currentTrainingWeeks}ì£¼</strong> í›ˆë ¨ ì‹œ ì˜ˆìƒ ê¸°ë¡:</span><div class="rec-time-display">${str}</div>`;return;}
            const diff=(pSec-d.targetSec)/pSec; let msg="",cls="feedback-box";
            if(diff<=-0.02){msg="ğŸ‘ ì¶©ë¶„í•©ë‹ˆë‹¤. ì—¬ìœ ë¡­ê²Œ ë‹¬ì„± ê°€ëŠ¥í•©ë‹ˆë‹¤.";cls+=" safe";}else if(diff<=0.015){msg="ğŸ‘Œ ì ì ˆí•©ë‹ˆë‹¤. ì„±ì‹¤íˆ í›ˆë ¨í•˜ë©´ ë‹¬ì„±ë©ë‹ˆë‹¤.";cls+=" safe";}else if(diff<=0.05){msg="ğŸ”¥ ë„ì „ì ì…ë‹ˆë‹¤. í›ˆë ¨ì„ ë¹ ì§€ë©´ í˜ë“­ë‹ˆë‹¤.";cls+=" challenge";}else{msg="âš ï¸ ë§¤ìš° ì–´ë µìŠµë‹ˆë‹¤. ëª©í‘œë¥¼ ë‚®ì¶”ê±°ë‚˜ ê¸°ê°„ì„ ëŠ˜ë¦¬ì„¸ìš”.";cls+=" danger";}
            box.className=cls; box.innerHTML=`<span>${msg}</span><div style="font-size:0.9rem; color:#555; margin-top:5px; padding-top:5px; border-top:1px solid rgba(0,0,0,0.1);">AI ì˜ˆìƒ: <strong>${str}</strong></div>`;
        }
        function selectPreset(w,b){
            document.querySelectorAll('.preset-btn').forEach(x=>x.classList.remove('active')); if(b)b.classList.add('active');
            if(w==='auto'){const v=document.getElementById('raceDate').value; if(v){const df=Math.ceil((new Date(v)-new Date())/86400000);currentTrainingWeeks=Math.floor(df/7);}else{currentTrainingWeeks=12;}}
            else{currentTrainingWeeks=w; const d=new Date();d.setDate(d.getDate()+(w*7));document.getElementById('raceDate').valueAsDate=d;}
            updateAll();
        }
        function enableCustomMode(){
            document.querySelectorAll('.preset-btn').forEach(x=>x.classList.remove('active')); document.getElementById('btnAuto').classList.add('active');
            const v=document.getElementById('raceDate').value; if(v){const diff=Math.ceil((new Date(v)-new Date())/86400000);currentTrainingWeeks=Math.max(1,Math.floor(diff/7));updateAll();}
        }
        function formatPace(s){const m=Math.floor(s/60),sc=Math.floor(s%60);return `${m}'${sc.toString().padStart(2,'0')}"`;}
        function secondsToTime(s){const h=Math.floor(s/3600),m=Math.floor((s%3600)/60),sc=Math.floor(s%60);return (h>0?h+":":"")+m.toString().padStart(2,'0')+":"+sc.toString().padStart(2,'0');}

        function switchView(id){
            ['view-home','view-summary','view-detail','view-schedule'].forEach(v=>{document.getElementById(v).classList.add('hidden');document.getElementById(v).classList.remove('fade-in');});
            document.getElementById(id).classList.remove('hidden'); document.getElementById(id).classList.add('fade-in');
            const sub = document.getElementById('pageSubtitle');
            if(id==='view-home') sub.innerText="ë‚˜ë§Œì˜ ë§ì¶¤í˜• í›ˆë ¨ í”„ë¡œê·¸ë¨ ì„¤ì •";
            else if(id==='view-summary') sub.innerText="ê³¼í•™ì  ë°ì´í„° ë¶„ì„ ê²°ê³¼";
            else if(id==='view-detail') sub.innerText="ë‹¨ê³„ë³„ í›ˆë ¨ ìŠ¤ì¼€ì¤„";
            else sub.innerText="ì¼ìë³„ ìƒì„¸ í›ˆë ¨ ê°€ì´ë“œ";
            window.scrollTo(0,0);
        }
        function goToHome(){switchView('view-home');} function goToSummary(){switchView('view-summary');} function goToDetail(){switchView('view-detail');} 
        function goToSchedule(){ currentViewWeek=1; switchView('view-schedule'); renderScheduleUI(); }

        function generateAndGoToSummary() {
            let i = getInputs(); if(!i){alert("ì…ë ¥ í™•ì¸ í•„ìš”");return;}
            if(i.targetSec===0) {
                const eqSec = i.curSec * Math.pow((i.targetDist / i.curDist), 1.06);
                let fM = (i.freq===3)?0.8:(i.freq===5?1.2:1.0);
                i.targetSec = Math.floor(eqSec * (1 - (currentTrainingWeeks * 0.0025 * fM)));
                const h=Math.floor(i.targetSec/3600), m=Math.floor((i.targetSec%3600)/60), s=Math.floor(i.targetSec%60);
                document.getElementById('tarH').value=h; document.getElementById('tarM').value=m; document.getElementById('tarS').value=s;
                alert(`ëª©í‘œ ê¸°ë¡ì„ ìë™ ì„¤ì •í–ˆìŠµë‹ˆë‹¤: ${h}ì‹œê°„ ${m}ë¶„ ${s}ì´ˆ`);
            }

            const diffDays = Math.ceil((new Date(document.getElementById('raceDate').value)-new Date())/86400000);
            const totalWeeks = Math.floor(diffDays/7);
            userFreq = i.freq; globalTargetDist = i.targetDist;

            const mp = i.targetSec/i.targetDist;
            userPaces = {
                recovery: formatPace(mp*1.35),
                easy: formatPace(mp*1.25),
                steady: formatPace(mp*1.10),
                marathon: formatPace(mp),
                threshold: formatPace(mp*0.93),
                interval: formatPace(mp*0.88)
            };
            
            const vdot = (1000/((i.targetSec*Math.pow(10/i.targetDist,1.06))/60)*2.5).toFixed(1);
            
            document.getElementById('sumTitle').innerText = `${i.targetDist===42.195?'Full':(i.targetDist===21.0975?'Half':(i.targetDist===10?'10K':'5K'))} ëª©í‘œ`;
            document.getElementById('sumTargetTime').innerText = secondsToTime(i.targetSec);
            document.getElementById('sumVdot').innerText = vdot;
            document.getElementById('sumWeeks').innerText = `${totalWeeks}ì£¼`;
            document.getElementById('sumDday').innerText = `D-${diffDays}`;
            
            document.getElementById('paceRecovery').innerText = userPaces.recovery + "/km";
            document.getElementById('paceEasy').innerText = userPaces.easy + "/km";
            document.getElementById('paceSteady').innerText = userPaces.steady + "/km";
            document.getElementById('paceMarathon').innerText = userPaces.marathon + "/km";
            document.getElementById('paceThreshold').innerText = userPaces.threshold + "/km";
            document.getElementById('paceInterval').innerText = userPaces.interval + "/km";

            renderTimeline(totalWeeks, i.freq, i.targetDist);
            document.getElementById('detailTotalWeeks').innerText = totalWeeks;
            document.getElementById('detailTarget').innerText = document.getElementById('sumTitle').innerText;
            
            goToSummary();
        }

        function renderTimeline(weeks, freq, targetDist) {
            const container = document.getElementById('timelineArea');
            container.innerHTML = "";
            let taper=2, peak=Math.max(2, Math.floor(weeks*0.25)), build=Math.max(3, Math.floor(weeks*0.35)), base=weeks-(taper+peak+build);
            if(base<1){base=1; build=weeks-(taper+peak+base);}
            
            const addCard = (type,name,dur,desc) => container.innerHTML += `<div class="phase-card ${type}"><div class="phase-header"><span class="phase-name">${name}</span><span class="phase-weeks">${dur}ì£¼ê°„</span></div><div class="phase-desc">${desc}</div></div>`;
            addCard('phase-base','1. Base',base,'ê¸°ì´ˆ ì²´ë ¥ ë° ìœ ì‚°ì†Œ ë² ì´ìŠ¤ êµ¬ì¶•');
            addCard('phase-build','2. Build',build,'ë§ˆì¼ë¦¬ì§€ ì¦ê°€ ë° ì—­ì¹˜ í›ˆë ¨');
            addCard('phase-peak','3. Peak',peak,'ìµœëŒ€ ê°•ë„, ì‹¤ì „ í˜ì´ìŠ¤ ì ì‘');
            addCard('phase-taper','4. Taper',taper,'í›ˆë ¨ëŸ‰ ê°ì†Œ ë° ì»¨ë””ì…˜ ì¡°ì ˆ');
        }

        function changeWeek(d){ const n=currentViewWeek+d; if(n<1||n>currentTrainingWeeks)return; currentViewWeek=n; renderScheduleUI(); }
        function renderScheduleUI(){
            const p=getPhaseName(currentViewWeek, currentTrainingWeeks);
            document.getElementById('displayWeek').innerText=`Week ${currentViewWeek}`;
            document.getElementById('displayPhase').innerText=`${p} Phase`;
            renderDailyGrid(currentViewWeek);
        }
        function getPhaseName(w,t){
            let tp=2, pk=Math.max(2,Math.floor(t*0.25)), bd=Math.max(3,Math.floor(t*0.35)), bs=t-(tp+pk+bd);
            if(bs<1) bs=1;
            if(w<=bs) return "Base"; if(w<=bs+bd) return "Build"; if(w<=bs+bd+pk) return "Peak"; return "Taper";
        }
        function renderDailyGrid(wNum){
            const grid=document.getElementById('dailyGrid'); grid.innerHTML="";
            const phase=getPhaseName(wNum,currentTrainingWeeks);
            const today=new Date(); const start=new Date(today); start.setDate(today.getDate()+(wNum-1)*7);
            const days=['ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† ','ì¼'];
            const plans=getWeeklyPlan(wNum,phase,userFreq,globalTargetDist);
            
            plans.forEach((p,i)=>{
                const d=new Date(start); d.setDate(start.getDate()+i);
                const dStr=`${d.getMonth()+1}.${d.getDate()} (${days[i]})`;
                const isToday=(wNum===1 && i===0);
                const card=document.createElement('div');
                card.className=`day-card type-${p.type} ${isToday?'today':''}`;
                card.onclick=(e)=>{document.querySelectorAll('.day-card').forEach(x=>x.classList.remove('active')); e.currentTarget.classList.add('active'); showDetail(p);};
                
                let badge = "";
                if(isToday) badge = `<span class="day-badge" style="background:#1c1c1e; color:#fff;">TODAY</span>`;
                else if(p.type==='Rest') badge = `<span class="day-badge">REST</span>`;

                card.innerHTML=`<div class="day-header"><div class="day-date">${dStr}</div>${badge}</div><span class="day-icon">${p.icon}</span><div class="day-title">${p.title}</div><div class="day-desc">${p.desc}</div>`;
                grid.appendChild(card);
            });
            if(grid.firstElementChild) { grid.firstElementChild.classList.add('active'); showDetail(plans[0]); }
        }
        function showDetail(p){
            document.getElementById('detailBox').style.display='block';
            document.getElementById('dIcon').innerText=p.icon; document.getElementById('dTitle').innerText=p.title; document.getElementById('dSubtitle').innerText=p.desc;
            document.getElementById('dWhy').innerText=p.why; document.getElementById('dHow').innerHTML=p.how; document.getElementById('dCaution').innerText=p.caution;
        }

        function getWeeklyPlan(week, phase, freq, distType) {
            const isFull = distType > 30; const isHalf = distType > 15 && distType < 30;
            let p = [
                { type: 'Rest', title: 'íœ´ì‹', icon: 'ğŸ›Œ' },
                { type: 'Easy', title: 'Easy Run', icon: 'ğŸƒâ€â™‚ï¸' },
                { type: 'Wed', title: 'ë³´ê°•/Easy', icon: 'ğŸ§˜' },
                { type: 'Speed', title: 'Point Run', icon: 'âš¡' }, 
                { type: 'Rest', title: 'íœ´ì‹', icon: 'ğŸ›Œ' },
                { type: 'Long', title: 'LSD', icon: 'ğŸ”ï¸' },
                { type: 'Recovery', title: 'Recovery', icon: 'ğŸ©¹' }
            ];
            
            if(freq === 3) { p[2] = {type:'Rest',title:'íœ´ì‹',icon:'ğŸ›Œ'}; p[6] = {type:'Rest',title:'íœ´ì‹',icon:'ğŸ›Œ'}; }
            else if(freq >= 5) { p[2] = {type:'Medium',title:'Steady Run',icon:'ğŸ'}; }

            let speedType = 'Tempo';
            if(phase === 'Base') speedType = 'Fartlek';
            else if(phase === 'Build') speedType = 'Tempo';
            else if(phase === 'Peak') speedType = 'Interval'; 
            else speedType = 'TaperPace';

            p[3].type = speedType; 

            return p.map(d => {
                let desc="", tag="", why="", how="", caution="";
                
                if(d.type === 'Rest') { desc="ì™„ì „ íœ´ì‹"; tag="Recovery"; why="íšŒë³µ"; how="<ul><li>ìˆ˜ë©´ ë³´ì¶©</li></ul>"; caution="ìš´ë™ ê¸ˆì§€"; }
                else if(d.type === 'Easy') { desc=`ì¡°ê¹… 40-50ë¶„ @ ${userPaces.easy}`; tag="Zone 2"; why="ìœ ì‚°ì†Œ ë² ì´ìŠ¤"; how="<ul><li>í¸ì•ˆí•˜ê²Œ</li></ul>"; caution="ì˜¤ë²„í˜ì´ìŠ¤ ê¸ˆì§€"; }
                else if(d.type === 'Wed') { desc="ë³´ê°•ìš´ë™ 30ë¶„"; tag="Cross"; why="ì½”ì–´ ê°•í™”"; how="<ul><li>ìŠ¤ì¿¼íŠ¸, í”Œë­í¬</li></ul>"; caution="ë¬´ë¦¬ ê¸ˆì§€"; }
                else if(d.type === 'Medium') { desc=`ì§€ì†ì£¼ 60ë¶„ @ ${userPaces.steady}`; tag="Aerobic"; why="ì§€êµ¬ë ¥"; how="<ul><li>ì¼ì •í•œ í˜ì´ìŠ¤ ìœ ì§€</li></ul>"; caution="ìì„¸ ì§‘ì¤‘"; }
                
                else if(d.type === 'Fartlek') { // Base Phase
                    d.title = "Fartlek"; d.icon = "ğŸ’¨"; desc = "ë³€ì†ì£¼ 40ë¶„"; tag = "Zone 3"; 
                    why = "ìŠ¤í”¼ë“œ ì ì‘ ë° ì‹¬ë°•ìˆ˜ ìê·¹"; 
                    how = `<ul><li><strong>ì›Œë°ì—…:</strong> 15ë¶„ ì¡°ê¹…</li><li><strong>ë³¸ìš´ë™:</strong> (3ë¶„ ì¡°ê¹… + 2ë¶„ ë¹ ë¥´ê²Œ) x 6íšŒ ë°˜ë³µ. ì§€í˜•ì§€ë¬¼ì„ ì´ìš©í•˜ì„¸ìš”.</li><li><strong>ì¿¨ë‹¤ìš´:</strong> 10ë¶„ ì¡°ê¹…</li></ul>`; 
                    caution = "ë¹ ë¥´ê²Œ ë‹¬ë¦´ ë•Œ ìì„¸ê°€ ë¬´ë„ˆì§€ì§€ ì•Šê²Œ ì£¼ì˜í•˜ì„¸ìš”.";
                }
                else if(d.type === 'Tempo') { // Build Phase
                    d.title = "Threshold"; d.icon = "ğŸ”¥"; 
                    let dist = isFull? (week%2==0?'10km':'12km') : '8km';
                    desc = `í…œí¬ëŸ° ${dist} @ ${userPaces.threshold}`; tag = "Zone 4";
                    why = "ì –ì‚° ì—­ì¹˜ í–¥ìƒ (ìŠ¤í”¼ë“œ ì§€êµ¬ë ¥)";
                    how = `<ul><li><strong>ì›Œë°ì—…:</strong> 3km ì¡°ê¹… + ì§ˆì£¼ 3íšŒ</li><li><strong>ë³¸ìš´ë™:</strong> ${dist}ë¥¼ <strong>${userPaces.threshold}</strong> í˜ì´ìŠ¤ë¡œ ìœ ì§€. (í˜ë“¤ì§€ë§Œ ë²„í‹¸ ìˆ˜ ìˆëŠ” ê°•ë„)</li><li><strong>ì¿¨ë‹¤ìš´:</strong> 2km ì¡°ê¹…</li></ul>`;
                    caution = "í˜ì´ìŠ¤ê°€ ì³ì§€ì§€ ì•Šê²Œ ì§‘ì¤‘í•˜ì„¸ìš”.";
                }
                else if(d.type === 'Interval') { // Peak Phase
                    d.title = "Interval"; d.icon = "âš¡"; 
                    desc = "1000m ì¸í„°ë²Œ x 5~7íšŒ"; tag = "Zone 5";
                    why = "ìµœëŒ€ ì‚°ì†Œ ì„­ì·¨ëŸ‰(VO2max) ê·¹ëŒ€í™”";
                    how = `<ul><li><strong>ì›Œë°ì—…:</strong> 3km ì¡°ê¹… + ë™ì  ìŠ¤íŠ¸ë ˆì¹­</li><li><strong>ë³¸ìš´ë™:</strong> 1000më¥¼ <strong>${userPaces.interval}</strong>ë¡œ ì§ˆì£¼ + 400m íšŒë³µ ì¡°ê¹…. ì´ë¥¼ 5~7ì„¸íŠ¸ ë°˜ë³µ.</li><li><strong>ì¿¨ë‹¤ìš´:</strong> 3km ì¡°ê¹…</li></ul>`;
                    caution = "ì‹¬ë°•ìˆ˜ê°€ 90~95%ê¹Œì§€ ì˜¬ë¼ê°€ì•¼ í•©ë‹ˆë‹¤. ê°€ì¥ ê³ í†µìŠ¤ëŸ¬ìš´ í›ˆë ¨ì…ë‹ˆë‹¤.";
                }
                else if(d.type === 'TaperPace') { // Taper Phase
                    d.title = "Marathon Pace"; d.icon = "ğŸ¯"; 
                    desc = `ëŒ€íšŒ í˜ì´ìŠ¤ ì ê²€ 8km @ ${userPaces.marathon}`; tag = "Race Pace";
                    why = "ì‹¤ì „ ê°ê° ì¡°ìœ¨";
                    how = `<ul><li><strong>ì›Œë°ì—…:</strong> 2km</li><li><strong>ë³¸ìš´ë™:</strong> 8kmë¥¼ ì •í™•íˆ ëŒ€íšŒ ëª©í‘œ í˜ì´ìŠ¤(${userPaces.marathon})ë¡œ ì£¼í–‰</li><li><strong>ì¿¨ë‹¤ìš´:</strong> 2km</li></ul>`;
                    caution = "ë„ˆë¬´ ë§ì´ ë›°ì§€ ë§ˆì„¸ìš”. ì—ë„ˆì§€ë¥¼ ë¹„ì¶•í•´ì•¼ í•©ë‹ˆë‹¤.";
                }

                else if(d.type === 'Long') {
                    let lDist = isFull ? (phase==='Base'?'20km':(phase==='Build'?'26km':(phase==='Peak'?'32km':'12km'))) : '15km';
                    desc = `LSD ${lDist}`; tag = "Endurance"; why="ì§€êµ¬ë ¥"; how=`<ul><li>ì²œì²œíˆ(${userPaces.easy}) ê¸¸ê²Œ</li></ul>`; caution="ê¸‰ìˆ˜ í•„ìˆ˜";
                }
                else if(d.type === 'Recovery') {
                    desc = "íšŒë³µëŸ¬ë‹ 30ë¶„"; tag="Zone 1"; why="í”¼ë¡œ íšŒë³µ"; how=`<ul><li>ì•„ì£¼ ì²œì²œíˆ(${userPaces.recovery})</li></ul>`; caution="ì‚°ì±…í•˜ë“¯";
                }

                return { ...d, desc, tag, why, how, caution };
            });
        }
    </script>
</body>
</html>
